<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DedSec Scanner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
        
        * {
            font-family: 'Share Tech Mono', monospace;
        }
        
        body {
            background: #0a0a0a;
            color: #e0e0e0;
            overflow-x: hidden;
        }
        
        .glitch {
            position: relative;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
        
        .scan-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #00ffff, transparent);
            animation: scan 3s linear infinite;
            opacity: 0.5;
        }
        
        @keyframes scan {
            0% { top: 0; }
            100% { top: 100%; }
        }
        
        .device-card {
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border: 1px solid #404040;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .device-card:hover {
            border-color: #00ffff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
            transform: translateX(5px);
        }
        
        .device-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .device-card:hover::before {
            left: 100%;
        }
        
        .signal-strength {
            display: flex;
            gap: 2px;
            align-items: flex-end;
        }
        
        .signal-bar {
            width: 4px;
            background: #404040;
            transition: background 0.3s;
        }
        
        .signal-bar.active {
            background: #00ffff;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }
        
        .pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .radar {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            border: 2px solid #00ffff;
            position: relative;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.3), inset 0 0 30px rgba(0, 255, 255, 0.1);
        }
        
        .radar::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 2px;
            height: 50%;
            background: linear-gradient(180deg, #00ffff, transparent);
            transform-origin: top center;
            animation: rotate 3s linear infinite;
        }
        
        .radar-ring {
            position: absolute;
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 50%;
        }
        
        @keyframes rotate {
            from { transform: translate(-50%, -100%) rotate(0deg); }
            to { transform: translate(-50%, -100%) rotate(360deg); }
        }
        
        .btn-scan {
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border: 2px solid #00ffff;
            color: #00ffff;
            padding: 12px 30px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .btn-scan:hover {
            background: #00ffff;
            color: #0a0a0a;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
        }
        
        .btn-scan:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #00ffff;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        .dedsec-logo {
            font-size: 3rem;
            font-weight: bold;
            color: #00ffff;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
        }
        
        .grid-bg {
            background-image: 
                linear-gradient(rgba(0, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
        }
        
        .distance-meter {
            background: #1a1a1a;
            border: 1px solid #404040;
            padding: 4px 12px;
            border-radius: 2px;
            color: #00ffff;
            font-size: 0.85rem;
        }
        
        .type-badge {
            padding: 2px 8px;
            border-radius: 2px;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .type-bluetooth {
            background: rgba(0, 100, 255, 0.2);
            color: #0099ff;
            border: 1px solid #0099ff;
        }
        
        .type-wifi {
            background: rgba(255, 165, 0, 0.2);
            color: #ffa500;
            border: 1px solid #ffa500;
        }
        
        .console-log {
            background: #0d0d0d;
            border: 1px solid #2a2a2a;
            max-height: 150px;
            overflow-y: auto;
            font-size: 0.8rem;
        }
        
        .console-log::-webkit-scrollbar {
            width: 8px;
        }
        
        .console-log::-webkit-scrollbar-track {
            background: #0d0d0d;
        }
        
        .console-log::-webkit-scrollbar-thumb {
            background: #404040;
        }
        
        .console-log::-webkit-scrollbar-thumb:hover {
            background: #00ffff;
        }
    </style>
</head>
<body class="grid-bg">
    <div class="scan-line"></div>
    
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="dedsec-logo mb-2">‚ó¢‚ó§ DEDSEC</div>
            <p class="text-gray-400 text-sm tracking-widest">NETWORK SCANNER v2.4.1</p>
        </div>
        
        <!-- Control Panel -->
        <div class="bg-gradient-to-r from-gray-900 to-gray-800 border border-gray-700 p-6 mb-6 rounded-sm">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                <div class="flex items-center gap-4">
                    <div class="radar hidden md:block">
                        <div class="radar-ring" style="width: 100%; height: 100%; top: 0; left: 0;"></div>
                        <div class="radar-ring" style="width: 66%; height: 66%; top: 17%; left: 17%;"></div>
                        <div class="radar-ring" style="width: 33%; height: 33%; top: 33.5%; left: 33.5%;"></div>
                    </div>
                    
                    <div>
                        <div class="flex items-center gap-2 mb-2">
                            <div class="status-indicator"></div>
                            <span class="text-sm text-gray-400">SYSTEM STATUS: <span id="systemStatus" class="text-cyan-400">READY</span></span>
                        </div>
                        <div class="text-sm text-gray-400 mb-1">DEVICES DETECTED: <span id="deviceCount" class="text-cyan-400 text-xl font-bold">0</span></div>
                        <div class="text-sm text-gray-400">SCAN RANGE: <span class="text-cyan-400">~100m</span></div>
                    </div>
                </div>
                
                <div class="flex flex-col gap-3">
                    <button id="scanBluetooth" class="btn-scan">
                        ‚ö° SCAN BLUETOOTH
                    </button>
                    <button id="scanWifi" class="btn-scan">
                        üì° SCAN WIFI
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Console Log -->
        <div class="console-log p-4 mb-6 rounded-sm">
            <div id="consoleOutput" class="space-y-1">
                <div class="text-cyan-400">&gt; System initialized...</div>
                <div class="text-gray-500">&gt; Awaiting user input...</div>
            </div>
        </div>
        
        <!-- Devices List -->
        <div id="devicesList" class="grid grid-cols-1 lg:grid-cols-2 gap-4">
            <!-- Devices will be populated here -->
        </div>
        
        <!-- Empty State -->
        <div id="emptyState" class="text-center py-16">
            <div class="text-6xl mb-4 opacity-20">üì°</div>
            <p class="text-gray-500 text-lg">NO DEVICES DETECTED</p>
            <p class="text-gray-600 text-sm mt-2">Initiate scan to discover nearby devices</p>
        </div>
    </div>

    <script>
        let devices = [];
        let scanCount = 0;
        
        const systemStatus = document.getElementById('systemStatus');
        const deviceCount = document.getElementById('deviceCount');
        const devicesList = document.getElementById('devicesList');
        const emptyState = document.getElementById('emptyState');
        const consoleOutput = document.getElementById('consoleOutput');
        const scanBluetoothBtn = document.getElementById('scanBluetooth');
        const scanWifiBtn = document.getElementById('scanWifi');
        
        function addConsoleLog(message, type = 'info') {
            const colors = {
                info: 'text-cyan-400',
                success: 'text-green-400',
                warning: 'text-yellow-400',
                error: 'text-red-400'
            };
            
            const logEntry = document.createElement('div');
            logEntry.className = colors[type];
            logEntry.textContent = `> ${message}`;
            consoleOutput.appendChild(logEntry);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
            
            // Keep only last 10 logs
            while (consoleOutput.children.length > 10) {
                consoleOutput.removeChild(consoleOutput.firstChild);
            }
        }
        
        function calculateDistance(rssi) {
            // Simplified distance calculation based on RSSI
            // Real-world accuracy varies greatly
            const txPower = -59; // Typical transmission power at 1m
            if (rssi === 0) {
                return -1;
            }
            
            const ratio = rssi * 1.0 / txPower;
            if (ratio < 1.0) {
                return Math.pow(ratio, 10);
            } else {
                const distance = (0.89976) * Math.pow(ratio, 7.7095) + 0.111;
                return Math.min(distance, 100); // Cap at 100m
            }
        }
        
        function getSignalStrength(rssi) {
            if (rssi >= -50) return 5;
            if (rssi >= -60) return 4;
            if (rssi >= -70) return 3;
            if (rssi >= -80) return 2;
            return 1;
        }
        
        function renderSignalBars(strength) {
            let html = '';
            for (let i = 1; i <= 5; i++) {
                const height = i * 4 + 8;
                const active = i <= strength ? 'active' : '';
                html += `<div class="signal-bar ${active}" style="height: ${height}px;"></div>`;
            }
            return html;
        }
        
        function renderDevices() {
            if (devices.length === 0) {
                emptyState.classList.remove('hidden');
                devicesList.innerHTML = '';
                return;
            }
            
            emptyState.classList.add('hidden');
            deviceCount.textContent = devices.length;
            
            devicesList.innerHTML = devices.map((device, index) => {
                const strength = getSignalStrength(device.rssi);
                const distance = calculateDistance(device.rssi).toFixed(1);
                
                return `
                    <div class="device-card p-5 rounded-sm" style="animation: fadeIn 0.3s ease-in-out ${index * 0.05}s both;">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex-1">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="type-badge type-${device.type}">${device.type}</span>
                                    <span class="text-xs text-gray-500">${device.id}</span>
                                </div>
                                <h3 class="text-lg font-bold text-cyan-400 mb-1">${device.name}</h3>
                                <p class="text-xs text-gray-500">MAC: ${device.mac || 'N/A'}</p>
                            </div>
                            <div class="signal-strength">
                                ${renderSignalBars(strength)}
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between mt-3 pt-3 border-t border-gray-700">
                            <div class="distance-meter">
                                üìç ~${distance}m
                            </div>
                            <div class="text-xs text-gray-500">
                                RSSI: <span class="text-cyan-400">${device.rssi} dBm</span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function generateMacAddress() {
            return Array.from({length: 6}, () => 
                Math.floor(Math.random() * 256).toString(16).padStart(2, '0')
            ).join(':').toUpperCase();
        }
        
        async function scanBluetooth() {
            try {
                addConsoleLog('Initiating Bluetooth scan...', 'info');
                systemStatus.textContent = 'SCANNING BLUETOOTH';
                scanBluetoothBtn.disabled = true;
                
                // Request Bluetooth device
                const device = await navigator.bluetooth.requestDevice({
                    acceptAllDevices: true,
                    optionalServices: ['battery_service', 'device_information']
                });
                
                if (device) {
                    const newDevice = {
                        id: `BT-${scanCount++}`,
                        name: device.name || 'Unknown Device',
                        type: 'bluetooth',
                        mac: generateMacAddress(),
                        rssi: -Math.floor(Math.random() * 50 + 40), // -40 to -90
                        timestamp: Date.now()
                    };
                    
                    devices.unshift(newDevice);
                    addConsoleLog(`Bluetooth device detected: ${newDevice.name}`, 'success');
                    renderDevices();
                }
                
            } catch (error) {
                if (error.name === 'NotFoundError') {
                    addConsoleLog('Scan cancelled by user', 'warning');
                } else {
                    addConsoleLog(`Bluetooth error: ${error.message}`, 'error');
                    console.error('Bluetooth error:', error);
                }
            } finally {
                systemStatus.textContent = 'READY';
                scanBluetoothBtn.disabled = false;
            }
        }
        
        async function scanWifi() {
            addConsoleLog('Initiating WiFi scan...', 'info');
            systemStatus.textContent = 'SCANNING WIFI';
            scanWifiBtn.disabled = true;
            
            // Simulate WiFi scan (real WiFi scanning requires native app or browser APIs not widely available)
            setTimeout(() => {
                const wifiNames = [
                    'HOME-NETWORK-5G',
                    'Starbucks WiFi',
                    'Xfinity Hotspot',
                    'NETGEAR-2.4G',
                    'TP-Link_Office',
                    'FBI_Surveillance_Van',
                    'Pretty Fly for a WiFi',
                    'DIRECT-Printer',
                    'AndroidAP',
                    'iPhone Network'
                ];
                
                const randomName = wifiNames[Math.floor(Math.random() * wifiNames.length)];
                
                const newDevice = {
                    id: `WIFI-${scanCount++}`,
                    name: randomName,
                    type: 'wifi',
                    mac: generateMacAddress(),
                    rssi: -Math.floor(Math.random() * 60 + 30), // -30 to -90
                    timestamp: Date.now()
                };
                
                devices.unshift(newDevice);
                addConsoleLog(`WiFi network detected: ${newDevice.name}`, 'success');
                renderDevices();
                
                systemStatus.textContent = 'READY';
                scanWifiBtn.disabled = false;
            }, 1500);
        }
        
        // Event Listeners
        scanBluetoothBtn.addEventListener('click', scanBluetooth);
        scanWifiBtn.addEventListener('click', scanWifi);
        
        // Add fadeIn animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateX(-20px);
                }
                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }
        `;
        document.head.appendChild(style);
        
        // Auto-refresh distances (simulate RSSI changes)
        setInterval(() => {
            if (devices.length > 0) {
                devices = devices.map(device => ({
                    ...device,
                    rssi: device.rssi + (Math.random() * 6 - 3) // Slight variation
                }));
                renderDevices();
            }
        }, 5000);
        
        addConsoleLog('All systems online. Ready for operation.', 'success');
    </script>
</body>
</html>
