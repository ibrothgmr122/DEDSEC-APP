<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>DedSec Phone — Web Toy</title>
<style>
  :root{
    --bg:#050505;
    --accent:#ff2bd3;
    --neon:#00ffd5;
    --glass: rgba(255,255,255,0.03);
    --mono: 'Courier New', monospace;
  }
  html,body{height:100%;margin:0;background:var(--bg);color:#ddd;font-family:var(--mono);}
  .phone { max-width:420px; margin:10px auto; border-radius:18px; overflow:hidden; background:
    linear-gradient(180deg,#070707 0%, #0b0b0b 100%); box-shadow: 0 10px 40px rgba(0,0,0,.8); }
  .screen { padding:14px; min-height:760px; box-sizing:border-box; background-image:
    radial-gradient(circle at 10% 10%, rgba(255,255,255,0.01), transparent 10%),
    repeating-linear-gradient(45deg, rgba(255,255,255,0.01) 0 2px, transparent 2px 6px);
  }
  header { display:flex; align-items:center; gap:10px; margin-bottom:8px; }
  .bar { height:18px; background:linear-gradient(90deg,var(--accent),#8a00ff);
    border-radius:6px; padding:2px 8px; font-size:12px; display:flex; align-items:center; gap:8px;}
  .home-grid{ display:grid; grid-template-columns: repeat(4,1fr); gap:10px; margin-top:10px; }
  .app { background:var(--glass); border-radius:12px; padding:10px; text-align:center; font-size:12px; cursor:pointer;
    border:1px solid rgba(255,255,255,0.03); box-shadow: 0 6px 14px rgba(0,0,0,0.6); }
  .app .icon{ width:48px;height:48px;margin:0 auto 6px; border-radius:8px; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:20px;}
  .app:hover{ transform:translateY(-4px); transition:transform .12s ease; }
  .modal { position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:40;}
  .modal.open{ display:flex; }
  .card { width:92%; max-width:420px; height:86vh; background:linear-gradient(180deg, rgba(0,0,0,0.85), rgba(0,0,0,0.95));
    border-radius:14px; border:1px solid rgba(255,255,255,0.04); padding:12px; box-sizing:border-box; overflow:hidden; color:#ddd;}
  .card header{display:flex; justify-content:space-between; align-items:center; gap:8px;}
  .close{ background:transparent; border:1px solid rgba(255,255,255,0.06); padding:6px 10px; border-radius:8px; cursor:pointer;}
  canvas,video{ width:100%; height:auto; border-radius:10px; background:#000; display:block; }
  .fake-btn{ background:var(--accent); padding:8px 12px; border-radius:8px; color:#fff; cursor:pointer; display:inline-block; margin-right:6px; font-weight:700; font-size:13px;}
  .log{ font-size:13px; line-height:1.3; margin-top:8px; max-height:28vh; overflow:auto; background:rgba(0,0,0,0.2); padding:8px; border-radius:8px;}
  .status { font-size:12px; color: #aaa; }
  .glitch { color:var(--accent); text-shadow: 1px 0 var(--neon), -1px 0 #7b00b3; letter-spacing:1px; font-weight:900;}
  .fake-card { background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:10px; border-radius:10px; margin-top:8px; }
  .anim { height:6px; background:linear-gradient(90deg,#111,#222); border-radius:6px; overflow:hidden; margin-top:8px; }
  .bar-inner { height:6px; width:0%; background:linear-gradient(90deg,var(--accent),var(--neon)); transition:width .6s ease; }
  footer{ text-align:center; color:#777; font-size:12px; margin-top:6px; }
  /* tiny retro pixel skull in background */
  body::after{ content:""; position:fixed; inset:0; pointer-events:none;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400"><text x="0" y="16" font-family="monospace" font-size="14" fill="%23222">☠︎ ☠︎ ☠︎</text></svg>');
    mix-blend-mode:overlay; opacity:0.07; z-index:0;}
</style>
</head>
<body>
<div class="phone">
  <div class="screen">
    <header>
      <div class="bar glitch">DEDSEC — <span style="font-weight:600">#BURN</span></div>
      <div style="margin-left:auto" class="status">online • 4G</div>
    </header>

    <div class="home-grid" id="home">
      <div class="app" data-app="dedsec">
        <div class="icon" style="background:linear-gradient(90deg,#111,#222)">☠</div>DedSec
      </div>
      <div class="app" data-app="profiler">
        <div class="icon" style="background:linear-gradient(90deg,#440044,#220022)">P</div>Profiler
      </div>
      <div class="app" data-app="car">
        <div class="icon" style="background:linear-gradient(90deg,#223,#112)">C</div>Car Ctrl
      </div>
      <div class="app" data-app="traffic">
        <div class="icon" style="background:linear-gradient(90deg,#114,#221)">T</div>Traffic
      </div>

      <div class="app" data-app="research">
        <div class="icon" style="background:linear-gradient(90deg,#440022,#110011)">R</div>Research
      </div>
      <div class="app" data-app="media">
        <div class="icon" style="background:linear-gradient(90deg,#002244,#001122)">M</div>Media
      </div>
      <div class="app" data-app="knowit">
        <div class="icon" style="background:linear-gradient(90deg,#222200,#111100)">?</div>Know-It-All
      </div>
      <div class="app" data-app="shop">
        <div class="icon" style="background:linear-gradient(90deg,#552200,#331100)">$</div>App Shop
      </div>
    </div>

    <footer>Fake hacking toy • purely fictional • no real recognition</footer>
  </div>
</div>

<!-- Modal / app container -->
<div class="modal" id="modal">
  <div class="card" role="dialog" aria-modal="true">
    <header>
      <div class="glitch" id="appTitle">App</div>
      <div>
        <button class="close" id="btnClose">Close</button>
      </div>
    </header>

    <div id="appBody" style="margin-top:10px"></div>
  </div>
</div>

<script>
/* Utility: random generators (fake data) */
const rand = (arr)=> arr[Math.floor(Math.random()*arr.length)];
const randInt = (n)=> Math.floor(Math.random()*n);
function fakeProfile(){
  const first = ["Alex","Sam","Taylor","Jordan","Riley","Morgan","Casey","Kai","Devon","Sky"];
  const last = ["Hart","Mills","Rey","Nguyen","Ortiz","Vega","Blake","Stone","Rowe","Khan"];
  const jobs = ["Barista","Coder","Delivery Rider","Artist","Paramedic","Student","Teacher","Bartender","Mechanic","DJ"];
  const traits = ["Cautious","Outgoing","Methodical","Chaotic","Charismatic","Secretive"];
  const crimes = ["None","Petty theft (2016)","Trespassing (2019)","Public disturbance (2020)","Fraud allegation (2017)"];
  return {
    name: rand(first)+" "+rand(last),
    id: "ID-"+Math.random().toString(36).slice(2,10).toUpperCase(),
    job: rand(jobs),
    traits: rand(traits),
    crimes: rand(crimes),
    hobbies: rand(["Skating","Photography","Gaming","Gardening","Cooking","Skateboarding","Livestreaming"]),
    income: "$"+(Math.floor(15000 + Math.random()*90000)).toLocaleString()
  };
}

/* Modal app system */
const modal = document.getElementById('modal');
const appBody = document.getElementById('appBody');
const appTitle = document.getElementById('appTitle');
const btnClose = document.getElementById('btnClose');

document.getElementById('home').addEventListener('click', e=>{
  const app = e.target.closest('.app');
  if(!app) return;
  openApp(app.dataset.app);
});

btnClose.onclick = ()=> closeApp();

function openApp(name){
  modal.classList.add('open');
  appTitle.textContent = name.toUpperCase();
  appBody.innerHTML = '';
  if(name==='dedsec') loadDedsec();
  if(name==='profiler') loadProfiler();
  if(name==='car') loadCarCtrl();
  if(name==='traffic') loadTraffic();
  if(name==='research') loadResearch();
  if(name==='media') loadMedia();
  if(name==='knowit') loadKnowIt();
  if(name==='shop') loadShop();
}
function closeApp(){
  stopStreams();
  modal.classList.remove('open');
}

/* Camera helpers */
let stream = null;
let video = null;
let vcanvas = null;
let vctx = null;
function startCamera(constraints={ video:{ facingMode:"environment", width:640, height:480 }, audio:false }) {
  return navigator.mediaDevices.getUserMedia(constraints)
    .then(s=>{
      stream = s;
      return s;
    });
}
function attachVideoTo(container){
  video = document.createElement('video');
  video.autoplay = true;
  video.muted = true;
  video.playsInline = true;
  video.srcObject = stream;
  container.appendChild(video);
  vcanvas = document.createElement('canvas');
  vcanvas.width = 320;
  vcanvas.height = 240;
  vctx = vcanvas.getContext('2d');
}

/* Stop camera */
function stopStreams(){
  if(stream){ stream.getTracks().forEach(t=>t.stop()); stream=null; }
  if(video && video.srcObject){ video.srcObject=null; }
}

/* Helper: sample frame and compute simple heuristics */
function sampleFrame(){
  if(!vctx || !video) return null;
  try{
    vctx.drawImage(video,0,0,vcanvas.width,vcanvas.height);
    const img = vctx.getImageData(0,0,vcanvas.width,vcanvas.height);
    return img;
  } catch(e){ return null; }
}

/* Simple "human present" detector using skin-tone heuristic + motion */
let prevData = null;
function detectHuman(img){
  if(!img) return false;
  const d = img.data;
  let skinCount = 0;
  let motionCount = 0;
  for(let i=0;i<d.length;i+=4){
    const r=d[i], g=d[i+1], b=d[i+2];
    // simple skin color test in RGB (not robust, but purely heuristic)
    const max = Math.max(r,g,b), min=Math.min(r,g,b);
    const rg = r/g;
    if(r>95 && g>40 && b>20 && (max-min)>15 && r>g && r>b) skinCount++;
    // motion detection vs previous frame
    if(prevData){
      const diff = Math.abs(r - prevData[i]) + Math.abs(g - prevData[i+1]) + Math.abs(b - prevData[i+2]);
      if(diff>60) motionCount++;
    }
  }
  prevData = new Uint8ClampedArray(d); // store snapshot
  const px = d.length/4;
  const skinRatio = skinCount/px;
  const motionRatio = motionCount/px;
  // heuristics: if skin pixels > 1% and motion > 1% assume person present
  return (skinRatio>0.01 && motionRatio>0.01) || motionRatio>0.03;
}

/* Simple "car present" detection using edge brightness + motion */
function detectCar(img){
  if(!img) return false;
  const d = img.data;
  let brightCount = 0;
  let motionCount = 0;
  for(let i=0;i<d.length;i+=4){
    const r=d[i], g=d[i+1], b=d[i+2];
    const lum = 0.2126*r + 0.7152*g + 0.0722*b;
    if(lum>150) brightCount++;
    if(prevData){
      const diff = Math.abs(r - prevData[i]) + Math.abs(g - prevData[i+1]) + Math.abs(b - prevData[i+2]);
      if(diff>80) motionCount++;
    }
  }
  const px = d.length/4;
  return (brightCount/px>0.02 && motionCount/px>0.02) || motionCount/px>0.04;
}

/* Traffic light detection: look for concentrated red/green blobs */
function detectTrafficLight(img){
  if(!img) return null;
  const d = img.data;
  const w = img.width, h = img.height;
  // scanning for bright red/green pixels
  let red=0, green=0;
  for(let i=0;i<d.length;i+=4){
    const r=d[i], g=d[i+1], b=d[i+2];
    if(r>160 && r>g+40 && r>b+40 && r>100) red++;
    if(g>160 && g>r+40 && g>b+40 && g>100) green++;
  }
  const px = d.length/4;
  if(red/px>0.002) return 'red';
  if(green/px>0.002) return 'green';
  return null;
}

/* ---------- App: Profiler ---------- */
function loadProfiler(){
  appBody.innerHTML = `
    <div class="fake-card">
      <div style="font-weight:800">Profiler</div>
      <div class="status">Uses camera to detect human figures only. No face recognition.</div>
      <div style="margin-top:8px" id="camArea"></div>
      <div style="margin-top:8px">
        <button class="fake-btn" id="btnStartProf">Start Camera</button>
        <button class="fake-btn" id="btnScanProf">Scan Person</button>
        <button class="close" id="btnStopProf">Stop</button>
      </div>
      <div class="log" id="profLog">Logs appear here...</div>
    </div>
  `;
  const camArea = document.getElementById('camArea');
  const btnStart = document.getElementById('btnStartProf');
  const btnScan = document.getElementById('btnScanProf');
  const btnStop = document.getElementById('btnStopProf');
  const profLog = document.getElementById('profLog');
  btnStart.onclick = async ()=>{
    profLog.innerHTML = "Starting camera...";
    try{
      await startCamera();
      attachVideoTo(camArea);
      prevData = null;
      profLog.innerHTML = "Camera running. Point at a person and press Scan Person.";
    } catch(e){
      profLog.innerHTML = "Camera error: "+(e.message||e);
    }
  };
  btnStop.onclick = ()=>{ stopStreams(); camArea.innerHTML=''; profLog.innerHTML='Stopped.'; };
  btnScan.onclick = ()=>{
    const img = sampleFrame();
    if(!img){ profLog.innerHTML = "No frame available. Start camera first."; return; }
    const human = detectHuman(img);
    if(human){
      const p = fakeProfile();
      profLog.innerHTML = `
        <strong>Human detected:</strong><br>
        Name: <span style="color:var(--accent)">${p.name}</span><br>
        ID: ${p.id}<br>
        Job: ${p.job}<br>
        Traits: ${p.traits}<br>
        Crimes: ${p.crimes}<br>
        Hobbies: ${p.hobbies}<br>
        Income: ${p.income}
      `;
      // animated bar
      const anim = document.createElement('div'); anim.className='anim'; anim.innerHTML='<div class="bar-inner" style="width:0%"></div>';
      profLog.appendChild(anim);
      setTimeout(()=> anim.querySelector('.bar-inner').style.width='82% ',20);
    } else {
      profLog.innerHTML = "No human-like figure detected. Try moving the camera or point at a person.";
    }
  };
}

/* ---------- App: Car Controller ---------- */
function loadCarCtrl(){
  appBody.innerHTML = `
    <div class="fake-card">
      <div style="font-weight:800">Car Controller</div>
      <div class="status">Detects large moving objects (car-like) and generates a fake car panel.</div>
      <div id="carCam"></div>
      <div style="margin-top:8px">
        <button class="fake-btn" id="btnCarStart">Start Camera</button>
        <button class="fake-btn" id="btnCarScan">Scan Vehicle</button>
        <button class="close" id="btnCarStop">Stop</button>
      </div>
      <div class="log" id="carLog">Awaiting action...</div>
    </div>
  `;
  const camArea = document.getElementById('carCam');
  const btnStart = document.getElementById('btnCarStart');
  const btnScan = document.getElementById('btnCarScan');
  const btnStop = document.getElementById('btnCarStop');
  const carLog = document.getElementById('carLog');
  btnStart.onclick = async ()=>{
    carLog.innerHTML='Starting camera...';
    try{ await startCamera(); attachVideoTo(camArea); prevData=null; carLog.innerHTML='Camera live. Press Scan Vehicle.'; } catch(e){ carLog.innerHTML='Camera error: '+e.message; }
  };
  btnStop.onclick = ()=>{ stopStreams(); camArea.innerHTML=''; carLog.innerHTML='Stopped.'; };
  btnScan.onclick = ()=>{
    const img = sampleFrame();
    if(!img){ carLog.innerHTML='No frame. Start camera.'; return; }
    const car = detectCar(img);
    if(car){
      const carId = "CAR-"+Math.random().toString(36).slice(2,10).toUpperCase();
      carLog.innerHTML = `
        <strong>Vehicle panel:</strong><br>ID: <span style="color:var(--neon)">${carId}</span><br>
        Status: <em>Nearby vehicle detected</em><br>
        <div style="margin-top:8px">
          <button class="fake-btn" onclick="fakeCarAction('start','${carId}')">Remote Start</button>
          <button class="fake-btn" onclick="fakeCarAction('left','${carId}')">Turn Left</button>
          <button class="fake-btn" onclick="fakeCarAction('unlock','${carId}')">Unlock</button>
        </div>
      `;
    } else {
      carLog.innerHTML = 'No car-like object detected. Try scanning a moving vehicle.';
    }
  };
}

/* stub used by generated markup above (global) */
window.fakeCarAction = function(action, id){
  const el = document.querySelector('#carLog');
  if(!el) return;
  el.innerHTML += `<div style="margin-top:10px">Executing <strong>${action}</strong> on <span style="color:var(--accent)">${id}</span> <span style="opacity:.7">... (simulation)</span></div>`;
  // show progress
  const anim = document.createElement('div'); anim.className='anim'; anim.innerHTML='<div class="bar-inner" style="width:0%"></div>';
  el.appendChild(anim); setTimeout(()=> anim.querySelector('.bar-inner').style.width='100%',20);
  setTimeout(()=> el.innerHTML += '<div style="color:#8f8; margin-top:6px">Action complete (visual only)</div>',1200);
};

/* ---------- App: Traffic Light ---------- */
function loadTraffic(){
  appBody.innerHTML = `
    <div class="fake-card">
      <div style="font-weight:800">Traffic Light Override</div>
      <div class="status">Detects red/green signals and offers fake overrides.</div>
      <div id="trafficCam"></div>
      <div style="margin-top:8px">
        <button class="fake-btn" id="btnTrafficStart">Start Camera</button>
        <button class="fake-btn" id="btnTrafficScan">Scan Light</button>
        <button class="close" id="btnTrafficStop">Stop</button>
      </div>
      <div class="log" id="trafficLog">Idle.</div>
    </div>
  `;
  const camArea = document.getElementById('trafficCam');
  const btnStart = document.getElementById('btnTrafficStart');
  const btnScan = document.getElementById('btnTrafficScan');
  const btnStop = document.getElementById('btnTrafficStop');
  const trafficLog = document.getElementById('trafficLog');
  btnStart.onclick = async ()=>{
    trafficLog.innerHTML='Starting camera...';
    try{ await startCamera({ video:{ facingMode:"environment", width:640, height:480}, audio:false }); attachVideoTo(camArea); prevData=null; trafficLog.innerHTML='Camera live. Press Scan Light.'; } catch(e){ trafficLog.innerHTML='Camera error: '+e.message; }
  };
  btnStop.onclick = ()=>{ stopStreams(); camArea.innerHTML=''; trafficLog.innerHTML='Stopped.'; };
  btnScan.onclick = ()=>{
    const img = sampleFrame();
    if(!img){ trafficLog.innerHTML='No frame. Start camera.'; return; }
    const light = detectTrafficLight(img);
    if(light){
      trafficLog.innerHTML = `Traffic light detected: <strong style="color:${light==='red'?'#ff5c5c':'#7bffb4'}">${light.toUpperCase()}</strong><br>
      <div style="margin-top:8px">
        <button class="fake-btn" onclick="fakeLight('forceGreen')">Force Green</button>
        <button class="fake-btn" onclick="fakeLight('forceRed')">Force Red</button>
        <button class="fake-btn" onclick="fakeLight('cycle')">Cycle</button>
      </div>`;
    } else {
      trafficLog.innerHTML = 'No red/green traffic light detected. Try pointing at a traffic signal.';
    }
  };
}
window.fakeLight = function(cmd){
  const el = document.querySelector('#trafficLog');
  el.innerHTML += `<div style="margin-top:8px">Sending <strong>${cmd}</strong>... <em>(simulation)</em></div>`;
  const anim = document.createElement('div'); anim.className='anim'; anim.innerHTML='<div class="bar-inner" style="width:0%"></div>';
  el.appendChild(anim); setTimeout(()=> anim.querySelector('.bar-inner').style.width='80%',20);
  setTimeout(()=> el.innerHTML += '<div style="color:#8f8; margin-top:6px">Override shown locally only.</div>',1400);
};

/* ---------- Other simple apps ---------- */
function loadDedsec(){
  appBody.innerHTML = `
    <div class="fake-card">
      <div style="font-weight:900; font-size:18px">DEDSEC HUB</div>
      <div class="status">Welcome back. This is a fictional interactive toy. Enjoy the vibes.</div>
      <div style="margin-top:12px">
        <div style="font-weight:800">Alerts</div>
        <div class="log">No real infra scanned. All outputs are random & client-side.</div>
      </div>
    </div>
  `;
}
function loadResearch(){
  appBody.innerHTML = `<div class="fake-card"><div style="font-weight:900">Research</div><ul>
    <li>Signal Jammer — visual mockup</li><li>Network Worm — visual only</li><li>Authority Scrambler — animation</li></ul>
    <div class="log">Upgrades are cosmetic. Use for role-play and demos.</div></div>`;
}
function loadMedia(){
  appBody.innerHTML = `<div class="fake-card"><div style="font-weight:900">Media Player</div>
    <audio controls src="https://cdn.jsdelivr.net/gh/jackd248/sample-audio@main/beat.mp3">Your browser doesn't support audio.</audio>
    <div class="log">Glitch tracks & ambient loops (sample).</div></div>`;
}
function loadKnowIt(){
  appBody.innerHTML = `<div class="fake-card"><div style="font-weight:900">Know-It-All</div>
    <div class="log">${rand(["Did you know? Neon signs were first developed in 1910.","Fun fact: A floppy disk icon still represents Save.","Tip: This is a simulated device."])}</div></div>`;
}
function loadShop(){
  appBody.innerHTML = `<div class="fake-card"><div style="font-weight:900">App Shop</div><div class="log">Buy fake plugins with imaginary credits. Everything is cosmetic.</div></div>`;
}

/* Close modal on background click */
modal.addEventListener('click', e=>{
  if(e.target===modal) closeApp();
});

/* Prevent accidental unload while camera on */
window.addEventListener('beforeunload', (e)=>{
  if(stream){ e.returnValue = "Camera in use"; return "Camera in use"; }
});
</script>
</body>
</html>
